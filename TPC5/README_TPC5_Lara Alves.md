Este código implementa um sistema simples de gerenciamento de um cinema, permitindo que os utilizadores listem filmes em exibição, verifiquem a disponibilidade de lugares, comprem bilhetes, listem lugares restantes e insiram novas salas de exibição. O sistema começa definindo uma estrutura de dados que contém informações sobre as salas de cinema, cada uma representada como uma lista que inclui a capacidade total da sala, uma lista de lugares reservados e o título do filme em exibição. O cinema é então organizado em uma lista que contém todas as salas disponíveis.

A função listar(cinema) é responsável por imprimir os títulos dos filmes em exibição nas diferentes salas. Para cada sala, ela exibe o número da sala e o título do filme correspondente. A função disponível(cinema, filme, lugar) verifica se um determinado lugar está disponível para um filme específico. Ela percorre as salas e, se o filme for encontrado e o lugar não estiver reservado, retorna True, indicando que o lugar está disponível. A função vendeBilhete(cinema, filme, lugar) utiliza a função disponível para verificar se o lugar pode ser reservado. Se o lugar estiver disponível, ele é adicionado à lista de lugares reservados da sala correspondente e uma mensagem de sucesso é exibida. Caso contrário, uma mensagem informa que o lugar não está disponível.

A função listardisponibilidades(cinema) cria uma lista com a informação sobre os lugares restantes em cada sala. Para cada sala, ela calcula o número de lugares disponíveis subtraindo o número de lugares reservados da capacidade total e retorna essa informação em uma lista de tuplas que contém o título do filme e o número de lugares restantes. A função inserirSala(cinema, lotação, filme) permite adicionar uma nova sala de exibição ao cinema. Ela cria uma nova sala como uma lista e verifica se a sala já existe no cinema antes de adicioná-la. Se a sala for adicionada com sucesso, uma mensagem de confirmação é exibida.

O programa apresenta um menu de opções, onde os utilizadores podem escolher diferentes ações digitando um número correspondente. O menu inclui opções para listar filmes, verificar disponibilidade, comprar bilhetes, listar lugares restantes e inserir novas salas. Um loop permite que o utilizador selecione ações até que decida encerrar o menu, escolhendo a opção 0. Quando isso acontece, uma mensagem de agradecimento é exibida, encerrando o programa.